---
import ja from "../../locales/ja/translation.json";
import en from "../../locales/en/translation.json";
import ko from "../../locales/ko/translation.json";

const locales = { ja, en, ko };
const locale = (Astro.currentLocale as keyof typeof locales) || "ja";
const t = locales[locale]; // t はオブジェクトです

const fieldContents = [
  {
    title: t.company.field_name,
    comments: t.home.title_company,
  },
  {
    title: t.company.field_money,
    comments: t.company.content_money,
  },
  {
    title: t.company.field_contact,
    comments: t.company.content_contact,
  },
  {
    title: t.company.field_content,
    comments: [
      t.company.content_business.content_1,
      t.company.content_business.content_4,
    ],
  },
  {
    title: t.company.field_tel,
    comments: [t.company.content_tel],
  },
  {
    title: t.company.field_mail,
    comments: [t.company.content_mail],
  },
];
---
<section class="py-10 md:py-12">
  <h2 class="section-title mb-8" data-animation="slideUp">overview</h2>
  <p class="[--border-position:6rem] border-text ml-[calc(var(--border-position)+1rem)]">
    <span data-animation="slideUp">{t.company.sub_title_overview}</span>
  </p>
  <div class="bg-white py-7 md:py-24 px-4 md:px-20 mt-20" data-animation="slideDown">
    <table class="w-full">
      <tbody>
        {
          fieldContents.map((item) => {
            return (
              <tr class="flex flex-col md:flex-row mb-5 md:mb-14 text-lg" data-animation="slideLeft">
                <th class="text-left md:w-1/4" set:html={item.title} />
                <td>
                  {/* item.comments が配列かどうかで判定するのが安全です */}
                  {!Array.isArray(item.comments) ? (
                    <p set:html={item.comments} />
                  ) : (
                    <ul class="list-disc list-outside ml-6 pl-2 [&>li:not(:last-child)]:mb-4">
                      {item.comments.map((comment) => (
                        <li set:html={comment} />
                      ))}
                    </ul>
                  )}
                </td>
              </tr>
            );
          })
        }
      </tbody>
    </table>
  </div>
</section>

<div class="text-center">
  {/* 修正箇所: ここもオブジェクトとして参照します */}
  {t.privacy_policy.content1}
<a
  class="text-link-color-blue hover:text-blue-800 underline"
  href={locale === "ja" ? "/privacypolicy" : `/${locale}/privacypolicy`}
>
  {t.privacy_policy.content2}
</a>

  {t.privacy_policy.content2}
</a>
  {t.privacy_policy.content3}
</div>